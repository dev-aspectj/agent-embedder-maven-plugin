<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from org.apache.maven.plugins:maven-plugin-report-plugin:3.11.0:report
 | Rendered using Apache Maven Fluido Skin 1.11.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Agent Embedder Maven Plugin &#x2013; Plugin Documentation</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.11.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.11.1.min.js"></script>
    <style>.github-fork-ribbon:before { background-color: gray; }</style>
  </head>
  <body class="topBarDisabled">
    <a class="github-fork-ribbon right-top" href="https://github.com/dev-aspectj/agent-embedder-maven-plugin" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1>Agent Embedder Maven Plugin</h1>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li class=""><a href="./index.html" title="Agent Embedder Maven Plugin">Agent Embedder Maven Plugin</a><span class="divider">/</span></li>
    <li class="active ">Plugin Documentation</li>
      <li id="projectVersion" class="pull-right">Version: 1.0-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="./index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="./usage.html" title="Usage"><span class="none"></span>Usage</a></li>
    <li><a href="./plugin-info.html" title="Goals"><span class="none"></span>Goals</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-down"></span>Project Reports</a>
     <ul class="nav nav-list">
      <li class="active"><a><span class="none"></span>Plugin Documentation</a></li>
     </ul></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<section>
<h2><a name="Plugin_Documentation"></a>Plugin Documentation</h2><a name="Plugin_Documentation"></a>
<p>This report describes goals, parameters details, requirements and sample usage of this plugin.</p><section>
<h3><a name="Goals"></a>Goals</h3><a name="Goals"></a>
<p>Goals available for this plugin:</p>
<table border="0" class="table table-striped">
<tr class="a">
<th>Goal</th>
<th>Description</th></tr>
<tr class="b">
<td align="left"><a href="./embed-mojo.html">agent-embedder:embed</a></td>
<td>Embeds one or more java agents into the module's main artifact 
<p>Use this goal, if (and only if) you have an <b>executable JAR</b> (with a <code>Main-Class</code> attribute in its manifest) and wish to <b>run a java agent automatically</b> when running the JAR with <code>java -jar my.jar</code> on <b>JRE 9+</b>.</p>
<p>Normally, you would need an additional <code>-javaagent:/path/to/agent.jar</code> JVM argument, but since Java 9 there is the <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/instrument/package-summary.html"> <code>Launcher-Agent-Class</code> mechanism</a>. I.e., even though this plugin works just fine on Java 8, you do need to launch the modified executable JAR on JRE 9+ to enjoy the benefits of this JVM feature.</p>
<p>The <code>javaAgents</code><!-- no javadoc sites associated --> specified for this goal will be unpacked from their JARs and embedded into the main artifact's root directory to make them visible to the java agent classloader during runtime. JVM classloaders cannot load agents from nested JARs.</p>
<p>The main artifact is expected to exist already when executing this goal. Typically, the Maven module already uses another plugin creating a build artifact during the <code>package</code> phase, which is why this goal by default also runs in the same phase. Make sure to configure this plugin to run <i>after</i> the plugin creating the main artifact, so you have something for it to operate on. This can be done most easily by simply listing both plugins in the POM file in the desired chronological execution order, if they are to run in the same phase. Another option would be to let them run in different phases, making sure that this plugin runs later than the one creating the artifact. We recommend to stick to convention over configuration and use the <code>package</code> phase. For example:</p>
<pre><code>&lt;!-- Create executable Spring Boot fat JAR --&gt;
&lt;plugin&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
&lt;/plugin&gt;
&lt;!-- Embed Java agent(s) for automatic execution --&gt;
&lt;plugin&gt;
  &lt;groupId&gt;dev.aspectj&lt;/groupId&gt;
  &lt;artifactId&gt;agent-embedder-maven-plugin&lt;/artifactId&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;embed-agents&lt;/id&gt;
      &lt;goals&gt;
        &lt;goal&gt;embed&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;configuration&gt;
        &lt;javaAgents&gt;
          &lt;!-- ... --&gt;
        &lt;/javaAgents&gt;
        &lt;removeEmbeddedAgents&gt;true&lt;/removeEmbeddedAgents&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;
</code></pre>
<p>Unique features not offered by the Java 9+ <code>Launcher-Agent-Class</code> mechanism:</p>
<ul>
 <li>Via <code>Launcher-Agent-Class</code>, the JVM only supports a single agent for auto-start, not multiple ones. Multiple agents can only be specified on the JVM command line. But this plugin installs its own launcher agent, which in turn is capable of starting <b>multiple java agents</b>.</li>
 <li><code>Launcher-Agent-Class</code> also does not support <b>agent option strings</b> like the JVM command line does. This plugin, however, does support agent arguments via its launcher agent. See the <code>javaAgents</code><!-- no javadoc sites associated --> section for more details.</li>
</ul></td></tr>
<tr class="a">
<td align="left"><a href="./help-mojo.html">agent-embedder:help</a></td>
<td>Display help information on agent-embedder-maven-plugin.
<br />
 Call <code>mvn agent-embedder:help -Ddetail=true -Dgoal=&lt;goal-name&gt;</code> to display parameter details.</td></tr></table></section><section>
<h3><a name="System_Requirements"></a>System Requirements</h3><a name="System_Requirements"></a>
<p>The following specifies the minimum requirements to run this Maven plugin:</p>
<table border="0" class="table table-striped">
<tr class="a">
<td align="left">Maven</td>
<td>3.2.5</td></tr>
<tr class="b">
<td align="left">JDK</td>
<td>1.8</td></tr></table></section><section>
<h3><a name="Usage"></a>Usage</h3><a name="Usage"></a>
<p>You should specify the version in your project's plugin configuration:</p>
<div class="source"><pre class="prettyprint">&lt;project&gt;
  ...
  &lt;build&gt;
    &lt;!-- To define the plugin version in your parent POM --&gt;
    &lt;pluginManagement&gt;
      &lt;plugins&gt;
        &lt;plugin&gt;
          &lt;groupId&gt;dev.aspectj&lt;/groupId&gt;
          &lt;artifactId&gt;agent-embedder-maven-plugin&lt;/artifactId&gt;
          &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
        &lt;/plugin&gt;
        ...
      &lt;/plugins&gt;
    &lt;/pluginManagement&gt;
    &lt;!-- To use the plugin goals in your POM or parent POM --&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;dev.aspectj&lt;/groupId&gt;
        &lt;artifactId&gt;agent-embedder-maven-plugin&lt;/artifactId&gt;
      &lt;/plugin&gt;
      ...
    &lt;/plugins&gt;
  &lt;/build&gt;
  ...
&lt;/project&gt;</pre></div>
<p>For more information, see <a class="externalLink" href="https://maven.apache.org/guides/mini/guide-configuring-plugins.html">&quot;Guide to Configuring Plug-ins&quot;</a></p></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">

        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>
